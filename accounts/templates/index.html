<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width"/>
        <title>Login Demo - Kakao JavaScript SDK</title>
        <script src="../../static/accounts/js/kakao.js"></script>
    </head>

    <body>
<!--    <a id="kakao-link-btn" href="javascript:sendLink()"><button>자바스크립트: 카카오톡 친구에게 선물하기</button></a>-->
    <a id="demo"><button>자바스크립트: 카카오톡 친구에게 선물하기</button></a>
    <button id="but">callback 데이터 알람창으로 확인하기</button>


    <script type='text/javascript'>
            document.getElementById("demo").onclick = function() {myFunction()};

            function myFunction() {

              Kakao.init('61b6098ac2bea13454d2fa44d235b788');  // sdk initialization, javascript key
              console.log("INITIALIZED", Kakao.isInitialized()); // check if its been initialized

              Kakao.Link.sendDefault({
                  objectType: 'text',
                  text: '간단한 JavaScript SDK 샘플과 함께 카카오 플랫폼 서비스 개발을 시작해 보세요.',
                  link: {
                    mobileWebUrl: 'https://developers.kakao.com',
                    webUrl: 'https://developers.kakao.com'
                  },
                  serverCallbackArgs: '{"myKey":"myValue"}' // 콜백 파라미터 설정
                });
            };


            document.getElementById("but").onclick = function() {
                let url = new URL('http://7e08e571b1f3.ngrok.io/callback');
                let searchParams = new URLSearchParams(url.search);
                console.log(searchParams.get('key1'));
                alert(searchParams.get('key1'));
            };
        </script>

    </body>
</html>